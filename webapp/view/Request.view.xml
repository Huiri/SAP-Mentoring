<mvc:View 
    controllerName="project1.controller.Request"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:f="sap.f"
    displayBlock="true"
    xmlns:t="sap.ui.table"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m">
    <!-- xmlns:namespace="라이브러리" 라이브러리 부를 별칭 설정 -->
    <f:DynamicPage  id="RequestPage">
        <f:title>
            <f:DynamicPageTitle id="_IDGenDynamicPageTitle1">
                <f:heading>
                    <HBox id="_IDGenHBox1">
                        <Title id="_IDGenTitle1" text="물품 요청 목록"/>
                    </HBox>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader id="_IDGenDynamicPageHeader1" pinnable="true">
                <form:SimpleForm id="_IDGenSimpleForm1" layout="ResponsiveGridLayout">
                    <form:content>
                        <!-- VBox : Vertical Box, HBox : Horizon Box -->
                        <VBox id="_IDGenVBox1">
                            <Label id="_IDGenLabel7" text="요청 번호 :"/>
                            <Input id="ReqNum"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData1" span="XL2 L2 M6 S12"/>
                                <!-- 일반적으로 M은 6 S는 12를 많이 사용 -->
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox2">
                            <Label id="_IDGenLabel8" text="요청 물품 :"/>
                            <Input id="ReqGood"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData2" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox3">
                            <Label id="_IDGenLabel9" text="요청자 :"/>
                            <Input id="Requester"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData3" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox4">
                            <Label id="_IDGenLabel10" text="요청 일자 :"/>
                            <DatePicker id="ReqDate"
                                        displayFormat="yyyy-MM"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData4" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox4_2">
                            <Label id="_IDGenLabel10_2" text="요청 일자2 :"/>
                            <DatePicker id="ReqDate2"
                                        displayFormat="yyyy-MM-dd"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData4_2" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox5">
                            <Label id="_IDGenLabel11" text="처리 상태 :"/>
                            <Select width="100%" id="ReqStatus">
                                <core:Item id="_IDGenItem1" text="전체"/>
                                <core:Item id="_IDGenItem2" text="승인" key="A"/>
                                <core:Item id="_IDGenItem3" text="처리 대기" key="B"/>
                                <core:Item id="_IDGenItem4" text="반려" key="C"/>
                            </Select>
                            <!-- 12등분한 화면의 비율을 얼만큼 차지할지 결정 -->
                            <layoutData>
                                <layout:GridData id="_IDGenGridData5" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox id="_IDGenVBox6">
                            <Label id="_IDGenLabel12" text="요청 국가 :"/>
                                <ComboBox id="ReqCtr"
                                    items="{
                                            path='/CountriesCollection'
                                            }">
                                <core:Item id="_IDGenItem5" key="{key}" text="{text}"/>    
                            </ComboBox>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData6" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
                        <FlexBox id="_IDGenHBox2" justifyContent="End">
                            <Button id="_IDGenButton5" text="검색" type="Emphasized" press=".onSearch"/>
                            <Button id="_IDGenButton4" text="초기화" type="Transparent" press=".onReset" class="sapUiTinyMarginBegin"/>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData7"  span="XL12 L12 M12 S12"/>
                            </layoutData>
                        </FlexBox>                       
                    </form:content>
                </form:SimpleForm>

            </f:DynamicPageHeader>
<!-- <VBox id="_IDGenVBox6_2">
                            <Label id="_IDGenLabel12_2" text="요청 국가 :"/>
                                <MultiComboBox id="ReqCtr2"
                                    items="{
                                            path='/CountriesCollection',
                                            sorter:{path : 'Name'}
                                            }">
                                    <core:Item id="_IDGenItem5_2" key="{ProductId}" text="{Name}"/>    
                                </MultiComboBox>
                            <layoutData>
                                <layout:GridData id="_IDGenGridData6_2" span="XL2 L2 M6 S12"/>
                            </layoutData>
                        </VBox>
 -->
        </f:header>
        <f:content>
        
            <t:Table 
                id="ui_table"
                selectionMode="MultiToggle"
                rows="{Request>/RequestOrder}" 
                selectionBehavior="RowOnly"
                rowSelectionChange=".getContext"
                width="auto">
                <!-- rows="{Request>/RequestOrder}" => 사용할 데이터를 행에 입력 -->

                    <t:extension>
                            <OverflowToolbar id="_IDGenOverflowToolbar1" style="Clear">
                                <Title id="title" text="Products"/>
                                <ToolbarSpacer id="_IDGenToolbarSpacer1"/>
                                <Button id="_IDGenButton1"
                                    icon="sap-icon://activities"
                                    tooltip="show indices of selected items"
                                    press="getSelectedIndices"/>
                                <Button id="_IDGenButton2"
                                    icon="sap-icon://activity-items"
                                    tooltip="show context of latest selection item"
                                    press="getContextByIndex"/>
                                <Button id="_IDGenButton3"
                                    icon="sap-icon://decline"
                                    tooltip="clear selection"
                                    press="clearSelection"/>
                                <Switch id="_IDGenSwitch1"
                                    state="true"
                                    customTextOn="on"
                                    customTextOff="off"
                                    tooltip="enable select all items"
                                    change="onSwitchChange"/>
                            </OverflowToolbar>
                        </t:extension>

                <t:columns>
                <!-- col 여러개 생성할 거라서 columns 태그를 상위에 위치시킴 -->
                    
                    <t:Column id="_IDGenColumn1" hAlign="Center">
                        <!-- <Label><Text> sap.m에 존재하기 때문에 namespace:Label || Text 선언 X -->
                        <Label id="_IDGenLabel1" text="요청번호"/>
                        <t:template>
                            <Text id="_IDGenText1" text="{Request>ReqNum}"/>
                        </t:template>  
                    </t:Column>

                    <t:Column id="_IDGenColumn2" hAlign="Center">
                        <Label id="_IDGenLabel2" text="요청물품"/>
                        <t:template>
                            <Text id="_IDGenText2" text="{Request>ReqGood}"/>
                        </t:template>
                    </t:Column>

                    <t:Column id="_IDGenColumn3" hAlign="Center">
                        <Label id="_IDGenLabel3" text="물품개수"/>
                        <t:template>
                            <Text id="_IDGenText3" text="{Request>ReqQty}"/>
                        </t:template>
                    </t:Column>

                    <t:Column id="_IDGenColumn4" hAlign="Center">
                        <Label id="_IDGenLabel4" text="요청자"/>
                        <t:template>
                            <Text id="_IDGenText4" text="{Request>Requester}"/>
                        </t:template>
                    </t:Column>

                    <t:Column id="_IDGenColumn5" hAlign="Center">
                        <Label id="_IDGenLabel5" text="요청일자"/>
                        <t:template>
                            <Text id="_IDGenText5" text="{Request>ReqDate}"/>
                        </t:template>
                    </t:Column>
                    
                    <t:Column id="_IDGenColumn6" hAlign="Center">
                        <Label id="_IDGenLabel6" text="처리상태"/>
                        <t:template>
                        <!-- &#36; : $의 특수문자 코드 -->
                            <ObjectStatus 
                                id="_IDGenObjectStatus1"
                                active="true"
                                press="alert(&#36;{$source>/text} + ' pressed')"
                                text="{
                                    path:'Request>ReqStatus',
                                    formatter:'.formatter.statusText'
                                    }"
                                state = "{=${Request>ReqStatus} === 'A' ? 'Success' : ${Request>ReqStatus}  === 'B' ? 'None' : 'Error'}"/>
                            <!-- <Text id="_IDGenText6" 
                                text="{
                                    path:'Request>ReqStatus',
                                    formatter:'.formatter.statusText'
                                }"/> -->
                        </t:template>
                    </t:Column>
                </t:columns>

            </t:Table>
    </f:content>
    </f:DynamicPage>
    <Button text="Indicies" id="btn_selected_indicies" press=".getSelectedIndices"/>
    <Button text="Context Index" id="btn_selected_Context_Index" press=".getContextByIndex"/>
    <Button text="Context" id="btn_selected_context" press=".getContext"/>

    
    
</mvc:View>